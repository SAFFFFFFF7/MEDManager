@using MEDManager.ViewModel;

@model MedicamentViewModel


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit</title>
</head>


<h1>Modifier un médicament :</h1>

<form asp-action="Edit" asp-controller="Medicament" method="post">

    <input type="hidden" asp-for="Medicament.Id" />

    <div class="flex flex-col">
        <label asp-for="Name" class="block mb-2 text-md font-medium text-text"></label>
        <input asp-for="Name" class="input input-bordered w-full" />
        <span asp-validation-for="Name" class="text-error"></span>
    </div>

    <div class="flex flex-col">
        <label asp-for="Quantity" class="block mb-2 text-md font-medium text-text"></label>
        <input asp-for="Quantity" class="input input-bordered w-full" />
        <span asp-validation-for="Quantity" class="text-error"></span>
    </div>

    <div class="flex flex-col">
        <label asp-for="Ingredients" class="block mb-2 text-md font-medium text-text"></label>
        <input asp-for="Ingredients" class="input input-bordered w-full" />
        <span asp-validation-for="Ingredients" class="text-error"></span>
    </div>

    @* <input asp-for="Medicament.Id" type="hidden" /> *@

    @* <div class="form-group">
        <label asp-for="@Model.Name"></label> <input asp-for="@Model.Name" class="form-control" />
        <span asp-validation-for="@Model.Name" class="text-danger"></span>
    </div> *@

    @* <div class="form-group">
        <label asp-for="@Model.Quantity"></label> <input asp-for="@Model.Quantity" class="form-control" />
        <span asp-validation-for="@Model.Quantity" class="text-danger"></span>
    </div> *@

    @* <div class="form-group">
        <label asp-for="@Model.Ingredients"></label> <input asp-for="@Model.Ingredients" class="form-control" />
        <span asp-validation-for="@Model.Ingredients" class="text-danger"></span>
    </div> *@

    <h4>Allergies</h4>
    <div class="form-group">
        @foreach (var allergy in Model.Allergies)
        {
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="SelectedAllergyIds" value="@allergy.Id"
                @(Model.SelectedAllergyIds != null && Model.SelectedAllergyIds.Contains(allergy.Id) ? "checked" : "") />
                <label class="form-check-label">@allergy.Name</label>
            </div>
        }
    </div>

    <h4>Antécédents</h4>
    <div class="form-group">
        @foreach (var medicalHistory in Model.MedicalHistories)
        {
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="SelectedMedicalHistoryIds" value="@medicalHistory.Id"
                @(Model.SelectedMedicalHistoryIds != null && Model.SelectedMedicalHistoryIds.Contains(medicalHistory.Id)
                    ? "checked" : "") />
                <label class="form-check-label">@medicalHistory.Name</label>
            </div>
        }
    </div>

    <input type="submit" value="Sauvegarder" class="btn btn-primary" />
    <input type="button" onclick="history.back()" value="Retour" class="btn btn-secondary" />
</form>

@* Permet de visualiser le resume de l'ensemble des erreurs de validation, ceci est un tag helper *@
<div asp-validation-summary="All" class="text-danger"></div>
